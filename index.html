<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Markdown Previewer</title>
    <!-- Import Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <style>
      #editor {
        height: 75vh;
      }
      .headerElem {
        background-color: black;
        color: white;
        padding-top: 1%;
        padding-bottom: 1%;
      }
      h1, h3 {
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <!-- Load React -->
    <script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
    <!-- Load React DOM -->
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
    <!-- Quickly Try JSX via Babel -->
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <!-- Import the Marked.js library to parse Markdown -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/1.2.5/marked.js"></script>
    <!-- Load freeCodeCamp test script -->
    <script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>

    
    <!-- Load default text input -->
    <script src="input.js"></script>
    <!-- React Container -->
    <div id="react-container" class="container-fluid"></div>
    <!-- React.JS Component -->
    <script type="text/babel">
      //React component
      class MyReactComponent extends React.Component {
        constructor(props) {
          super(props);
          //Load initial state
          this.state = {
            input: defaultInput
          };
          this.handleChange = this.handleChange.bind(this);
        }
        //To get input field value
        handleChange = (event) => {
          this.setState({
            input: event.target.value
          });
        }
        render() {
          //If true, add <br> on a single line break (copies GitHub behavior on comments, but not on rendered markdown files). Requires gfm be true.
          let markdownPrev = marked(this.state.input, {breaks: true});
          //dangerouslySetInnerHTML is Reactâ€™s replacement for using innerHTML in the browser DOM
          const createMarkup = () => {
            return {
              __html: markdownPrev
            };
          }
          return (
            <div>
              <div className="row text-center headerElem">
                <h1>Markdown Previewer</h1>
              </div>
              <div className="row">
                <div className="col-md-6">
                  <h3>Markdown Editor</h3>
                  <p>Replace the default text below and observe the output</p>
                  <textarea id="editor" className="form-control p-1" value={this.state.input} onChange={this.handleChange}>
                    {defaultInput}
                  </textarea>
                </div>
                <div className="col-md-6">
                  <h3>Output</h3>
                  <p>The text is rendered as HTML below</p>
                  <div id="preview" className="" dangerouslySetInnerHTML={createMarkup()}>
                  </div>
                </div>
              </div>
            </div>
          );
        }
      };
      ReactDOM.render(<MyReactComponent/>, document.getElementById('react-container'))
    </script>
  </body>
</html>